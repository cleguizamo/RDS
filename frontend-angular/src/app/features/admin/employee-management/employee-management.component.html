<div class="employee-management">
  <div class="header">
    <h2>Gestión de Empleados</h2>
    <button (click)="showAddForm()" class="btn-add" [disabled]="showForm() || loading()">
      {{ showForm() ? 'Cancelar' : 'Agregar Empleado' }}
    </button>
  </div>

  @if (errorMessage()) {
    <div class="alert alert-error">{{ errorMessage() }}</div>
  }

  @if (successMessage()) {
    <div class="alert alert-success">{{ successMessage() }}</div>
  }

  @if (showForm()) {
    <div class="form-card">
      <h3>Agregar Nuevo Empleado</h3>
      <form (ngSubmit)="createEmployee()">
        <div class="form-row">
          <div class="form-group">
            <label>Nombre *</label>
            <input type="text" [(ngModel)]="employeeForm.name" name="name" required />
          </div>
          <div class="form-group">
            <label>Apellido *</label>
            <input type="text" [(ngModel)]="employeeForm.lastName" name="lastName" required />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Tipo de Documento *</label>
            <select [(ngModel)]="employeeForm.documentType" name="documentType" required>
              @for (type of documentTypes; track type) {
                <option [value]="type">{{ type }}</option>
              }
            </select>
          </div>
          <div class="form-group">
            <label>Número de Documento *</label>
            <input type="text" [(ngModel)]="employeeForm.documentNumber" name="documentNumber" required />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Email *</label>
            <input type="email" [(ngModel)]="employeeForm.email" name="email" required />
          </div>
          <div class="form-group">
            <label>Teléfono *</label>
            <input type="text" [(ngModel)]="employeeForm.phone" name="phone" pattern="[0-9]{10}" required />
          </div>
        </div>

        <div class="form-group">
          <label>Contraseña *</label>
          <input type="password" [(ngModel)]="employeeForm.password" name="password" minlength="6" required />
          <small>Mínimo 6 caracteres, debe incluir letras y números</small>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-save" [disabled]="loading()">
            {{ loading() ? 'Guardando...' : 'Crear Empleado' }}
          </button>
          <button type="button" class="btn-cancel" (click)="cancelForm()" [disabled]="loading()">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  }

  @if (loading() && employees().length === 0) {
    <div class="loading">Cargando empleados...</div>
  } @else {
    <div class="employees-table">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre Completo</th>
            <th>Email</th>
            <th>Teléfono</th>
            <th>Documento</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          @for (employee of employees(); track employee.id) {
            <tr>
              <td>{{ employee.id }}</td>
              <td>{{ employee.name }} {{ employee.lastName }}</td>
              <td>{{ employee.email }}</td>
              <td>{{ employee.phone }}</td>
              <td>{{ employee.documentType }} - {{ employee.documentNumber }}</td>
              <td>
                <button class="btn-delete" (click)="deleteEmployee(employee.id)">Eliminar</button>
              </td>
            </tr>
          }
          @if (employees().length === 0) {
            <tr>
              <td colspan="6" class="no-data">No hay empleados registrados</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>

