<nav class="navbar">
  <div class="navbar-container">
    <div class="navbar-brand">
      <a [routerLink]="['/']" class="brand-link">
        <span class="brand-icon">üç∫</span>
        <span class="brand-name">El Rinc√≥n del Sabor</span>
      </a>
    </div>

    <button class="menu-toggle" (click)="toggleMenu()" [class.active]="isMenuOpen()">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="navbar-menu" [class.active]="isMenuOpen()">
      <a [routerLink]="['/']" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link">Inicio</a>
      <a [routerLink]="['/menu']" routerLinkActive="active" class="nav-link">Men√∫</a>
      <a [routerLink]="['/reservations']" routerLinkActive="active" class="nav-link">Reservas</a>

      <!-- Carrito de compras - Visible para todos -->
      <app-cart-dropdown></app-cart-dropdown>

      @if (!authService.isAuthenticated()) {
        <a [routerLink]="['/login']" class="nav-link nav-btn">Iniciar Sesi√≥n</a>
        <a [routerLink]="['/signup']" class="nav-link nav-btn-primary">Registrarse</a>
      } @else {
        <div 
          class="user-menu"
          (mouseenter)="openDropdown()"
          (mouseleave)="closeDropdown()">
          <span class="user-name">{{ authService.currentUser()?.name }}</span>
          <div 
            class="user-dropdown"
            [class.open]="isDropdownOpen()"
            (mouseenter)="keepDropdownOpen()"
            (mouseleave)="closeDropdown()">
            <a [routerLink]="['/account']" class="dropdown-link">Mi Cuenta</a>
            @if (authService.currentUser()?.role === 'ADMIN') {
              <a [routerLink]="['/admin']" class="dropdown-link">Panel Admin</a>
            }
            @if (authService.currentUser()?.role === 'EMPLOYEE') {
              <a [routerLink]="['/employee']" class="dropdown-link">Panel Empleado</a>
            }
            @if (authService.currentUser()?.role === 'CLIENT') {
              <a [routerLink]="['/dashboard']" class="dropdown-link">Dashboard</a>
            }
            <button (click)="logout()" class="dropdown-link">Cerrar Sesi√≥n</button>
          </div>
        </div>
      }
    </div>
  </div>
</nav>

